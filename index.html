<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OHP05 TIPS| Pro Tips & Live</title>
  
  <meta name="theme-color" content="#14213d">
  <meta name="mobile-web-app-capable" content="yes">

  <style>
    :root {
      --primary-red: #e63946;
      --bg-color: #f8fafc;
      --card-bg: #ffffff;
      --text-color: #0f172a;
      --nav-bg: #14213d;
      --accent: #f59e0b;
      --win: #10b981;
    }

    [data-theme="dark"] {
      --bg-color: #020617;
      --card-bg: #1e293b;
      --text-color: #f1f5f9;
      --nav-bg: #000000;
    }

    body { background: var(--bg-color); color: var(--text-color); font-family: 'Inter', sans-serif; margin: 0; padding-bottom: 80px; transition: 0.3s; overflow-x: hidden; }
    
    /* Live Ticker */
    .ticker-wrap { background: #000; color: #00f0ff; padding: 10px 0; overflow: hidden; position: sticky; top: 0; z-index: 1001; font-family: monospace; border-bottom: 2px solid var(--primary-red); }
    .ticker { display: flex; white-space: nowrap; animation: ticker 40s linear infinite; }
    @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
    .score-item { margin: 0 30px; font-weight: bold; }

    header { background: var(--nav-bg); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
    .logo { color: white; font-weight: 900; font-size: 1.5rem; letter-spacing: -1.5px; }
    .logo span { color: var(--primary-red); }

    /* Card Styling */
    .tip-card { background: var(--card-bg); border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.05); overflow: hidden; position: relative; }
    .tip-img { width: 100%; height: 220px; object-fit: cover; }
    .tip-body { padding: 20px; }
    
    .share-btn { position: absolute; right: 15px; bottom: 20px; background: #25D366; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; }

    /* Nav */
    .bottom-nav { position: fixed; bottom: 0; width: 100%; background: var(--nav-bg); display: flex; justify-content: space-around; padding: 15px 0; z-index: 1000; }
    .nav-btn { background: none; border: none; color: #94a3b8; font-size: 0.75rem; cursor: pointer; }
    .nav-btn.active { color: white; font-weight: bold; }
    .nav-btn i { font-size: 1.5rem; display: block; margin-bottom: 4px; }

    .container { padding: 15px; max-width: 600px; margin: auto; }
    .hidden { display: none !important; }
    .btn-red { background: var(--primary-red); color: white; border: none; padding: 14px; border-radius: 12px; font-weight: bold; width: 100%; cursor: pointer; margin-top: 10px; }
    
    input, textarea { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; background: var(--card-bg); color: var(--text-color); }

    /* Privacy View */
    #page-privacy { line-height: 1.6; padding: 20px; background: var(--card-bg); border-radius: 20px; }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

  <div class="ticker-wrap">
    <div class="ticker" id="liveTicker">
      <span class="score-item">WELCOME TO OHP05 TIPS- WIN DAILY!</span>
      <span class="score-item">ARSNL 1 - 0 CHELSEA (LIVE)</span>
    </div>
  </div>

  <header>
    <div class="logo">OHP05<span>TIPS</span></div>
    <div style="display: flex; gap: 15px; color: white; font-size: 1.3rem;">
        <i class="fas fa-circle-half-stroke" onclick="toggleTheme()" style="cursor:pointer"></i>
        <i class="fas fa-unlock-keyhole" onclick="toggleAdmin()" style="cursor:pointer"></i>
    </div>
  </header>

  <div class="container">
    <div id="page-tips">
      <div id="tipsContainer"></div>
    </div>

    <div id="page-polls" class="hidden">
        <div style="background:var(--card-bg); padding:30px; border-radius:20px; text-align:center;">
            <h2 id="pollQuestion">Poll Loading...</h2>
            <div id="pollOptions"></div>
        </div>
    </div>

    <div id="page-vip" class="hidden">
        <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); color:white; padding:50px 20px; border-radius:25px; text-align:center;">
            <i class="fas fa-crown" style="font-size:4rem; color:var(--accent); margin-bottom:20px;"></i>
            <h2>JOIN VIP</h2>
            <p>Chat with us on WhatsApp for 99% Sure Odds.</p>
            <button class="btn-red" style="background:var(--accent); color:black;" onclick="window.open('https://wa.me/255XXXXXXXXX')">WHATSAPP ADMIN</button>
            <br><br>
            <p onclick="showPage('privacy')" style="color:#64748b; font-size:0.8rem; cursor:pointer; text-decoration: underline;">Privacy Policy</p>
        </div>
    </div>

    <div id="page-privacy" class="hidden">
        <h2 style="color:var(--primary-red)">Privacy Policy</h2>
        <p><strong>ONESMO SPORTS</strong> collects anonymous poll data to improve your experience. We use Google Firebase for data storage and do not share your information with 3rd parties.</p>
        <p>By using this app, you agree to our terms of service.</p>
        <button class="btn-red" onclick="showPage('tips')">Back to App</button>
    </div>

    <div id="adminPanel" class="hidden" style="background:var(--card-bg); padding:20px; border-radius:20px; margin-top:20px; border:2px solid var(--primary-red)">
        <h3>Admin Tools</h3>
        <input type="password" id="adminPass" placeholder="Admin Key">
        <button onclick="verifyAdmin()" class="btn-red">Login</button>
        <div id="adminTools" class="hidden">
            <hr>
            <input type="text" id="tMatch" placeholder="Match">
            <input type="text" id="tPred" placeholder="Tip">
            <input type="text" id="tOdds" placeholder="Odds">
            <textarea id="tAnal" placeholder="Analysis..."></textarea>
            <input type="file" id="tImage" accept="image/*">
            <button onclick="publishTip()" class="btn-red" id="pubBtn" style="background:#10b981">PUBLISH</button>
        </div>
    </div>
  </div>

  <nav class="bottom-nav">
    <button class="nav-btn active" id="tab-tips" onclick="showPage('tips')"><i class="fas fa-fire"></i>TIPS</button>
    <button class="nav-btn" id="tab-polls" onclick="showPage('polls')"><i class="fas fa-chart-simple"></i>POLLS</button>
    <button class="nav-btn" id="tab-vip" onclick="showPage('vip')"><i class="fas fa-star"></i>VIP</button>
  </nav>

  <script type="module">
    // --- FIREBASE SETTINGS ---
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, doc, deleteDoc, updateDoc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyByX8KkqRnkz9_6PMkMHWOK_zBfOGokgWc",
      authDomain: "onesmus-site.firebaseapp.com",
      projectId: "onesmus-site",
      storageBucket: "onesmus-site.firebasestorage.app",
      messagingSenderId: "354101413054",
      appId: "1:354101413054:web:2f9af29ece088f5baa0aef"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    let isAdmin = false;

    // --- NAVIGATION LOGIC ---
    window.showPage = (p) => {
      ['tips', 'polls', 'vip', 'privacy'].forEach(id => {
        document.getElementById(`page-${id}`).classList.toggle('hidden', id !== p);
        const btn = document.getElementById(`tab-${id}`);
        if(btn) btn.classList.toggle('active', id === p);
      });
    };

    // --- OTHER LOGIC (VOTING, PUBLISHING, THEME) ---
    window.toggleTheme = () => {
      const isDark = document.body.getAttribute('data-theme') === 'dark';
      document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
    };

    window.toggleAdmin = () => document.getElementById("adminPanel").classList.toggle("hidden");
    window.verifyAdmin = () => {
      if(document.getElementById("adminPass").value === "Onesmo2004") {
        isAdmin = true;
        document.getElementById("adminTools").classList.remove("hidden");
        alert("Success");
      }
    };

    // --- SHARE TIP ---
    window.shareTip = (match, pred, odds) => {
        const text = `ðŸ”¥ *ONESMO SPORTS TIP* ðŸ”¥\nðŸ† ${match}\nðŸŽ¯ ${pred}\nðŸ“ˆ Odds: ${odds}\n\nAngalia zaidi hapa: ${window.location.href}`;
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`);
    };

    // --- FETCH DATA ---
    onSnapshot(query(collection(db, "predictions"), orderBy("timestamp", "desc")), (snap) => {
        const container = document.getElementById("tipsContainer");
        container.innerHTML = "<h3>Recommended Picks</h3>";
        snap.forEach(docSnap => {
            const tip = docSnap.data();
            container.innerHTML += `
                <div class="tip-card">
                    ${tip.image ? `<img src="${tip.image}" class="tip-img">` : ""}
                    <div class="tip-body">
                        <div class="tip-match">${tip.match}</div>
                        <div style="font-weight:bold; color:var(--win)">${tip.prediction}</div>
                        <div class="tip-odds">@${tip.odds}</div>
                        <p style="font-size:0.85rem; color:#64748b;">${tip.analysis}</p>
                        ${isAdmin ? `<button onclick="deleteTip('${docSnap.id}')" style="color:red; background:none; border:none;">Delete</button>` : ""}
                    </div>
                    <button class="share-btn" onclick="shareTip('${tip.match}', '${tip.prediction}', '${tip.odds}')">
                        <i class="fab fa-whatsapp"></i>
                    </button>
                </div>
            `;
        });
    });

    window.publishTip = async () => {
        const file = document.getElementById("tImage").files[0];
        let imageData = "";
        if(file) {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            imageData = await new Promise(res => reader.onload = () => res(reader.result));
        }
        await addDoc(collection(db, "predictions"), {
            match: document.getElementById("tMatch").value,
            prediction: document.getElementById("tPred").value,
            odds: document.getElementById("tOdds").value,
            analysis: document.getElementById("tAnal").value,
            image: imageData,
            timestamp: Date.now()
        });
        location.reload();
    };

    window.deleteTip = (id) => confirm("Delete?") && deleteDoc(doc(db, "predictions", id));
  </script>
</body>
</html>
